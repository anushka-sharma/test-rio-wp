!function(d){"use strict";var g={option:{},init:function(t){g.option=d.extend(g.option,t),this.attachListeners()},attachListeners:function(){d(document).on("wpglobus_post_name_full",function(t,e){return e.language==WPGlobusCoreData.default_language?e.postnamefull:e.postnamefull+"-"+e.language})},ajax:function(t,e){return d.ajax({beforeSend:function(){e()},type:"POST",url:ajaxurl,data:{action:WPGlobusSlug.data.process_ajax,order:t},dataType:"json"})},editPermalink:function(e,n){var t,l,a=0,o=d("#editable-post-name-"+n),u=o.html(),i=d("#post_name_"+n),s=i.val()||"",c=d("#edit-slug-buttons-"+n),p=c.html(),r=d("#editable-post-name-full-"+n);for(r.find("img").replaceWith(function(){return this.alt}),r=r.html(),d("#view-post-btn-"+n).hide(),c.html('<a href="#" class="wpglobus-save button button-small" data-language="'+n+'">'+postL10n.ok+'</a> <a class="wpglobus-cancel" href="#">'+postL10n.cancel+"</a>"),c.children(".wpglobus-save").click(function(){var t=o.children("input").val();return t==d("#editable-post-name-full-"+n).text()?c.children(".wpglobus-cancel").click():g.ajax({language:n,action:"wpglobus-sample-permalink",post_id:e,new_title:d("#title_"+n).val(),new_slug:t,samplepermalinknonce:d("#samplepermalinknonce").val(),post_name_full:d("#editable-post-name-full").text(),slug_type:WPGlobusSlug.data.slug_type},function(){}).done(function(t){var e=d("#edit-slug-box-"+n);e.html(t),e.hasClass("hidden")&&e.fadeIn("fast",function(){e.removeClass("hidden")}),c.html(p),d("#view-post-btn-"+n).show(),d(document).trigger("wpglobus-sample-permalink:done",[t,n])}).fail(function(t){}).always(function(t,e){}),!1}),c.children(".wpglobus-cancel").click(function(){return d("#view-post-btn-"+n).show(),o.html(u),c.html(p),i.val(s),!1}),t=0;t<r.length;++t)"%"==r.charAt(t)&&a++;l=a>r.length/4?"":r,o.html('<input type="text" id="new-post-slug-'+n+'" value="'+l+'" />').children("input").keypress(function(t){var e=t.keyCode||0;return 13==e?(c.children(".wpglobus-save").click(),!1):27==e?(c.children(".wpglobus-cancel").click(),!1):void 0}).keyup(function(){i.val(this.value)}).focus()}};WPGlobusSlug=d.extend({},WPGlobusSlug,g),WPGlobusSlug.init()}(jQuery);