!function(u){"use strict";var o={option:{},real_slug:u("#post_name"),revert_slug:u("#post_name").val(),currentExtraLanguage:void 0,promise:u.when(),init:function(e){o.option=u.extend(o.option,e),o.localizePermalink(!0),this.attachListeners(),o.yoastSettings()},yoastSettings:function(){WPGlobusAdmin.builder.language!=WPGlobusCoreData.default_language&&"YoastSEO"==WPGlobusPlusSlug.yoastSeo&&setTimeout(function(){u(".wpseo-metabox-root button").each(function(e,a){-1!=u(a).attr("class").indexOf("Button__BaseButton-")&&u(a).addClass("wpglobus-plus-base-button")}),u(document).on("click",".wpglobus-plus-base-button",function(e){setTimeout(function(){u("#snippet-editor-field-slug").prop("disabled",!0)},500)})},1500)},localizePermalink:function(e){if(void 0===e&&(e=!1),"gutenberg"!=WPGlobusPlusSlug.builderID&&WPGlobusCoreData.default_language!=WPGlobusPlusSlug.builder.language){WPGlobusPlusSlug.homeURL;var a=u("#sample-permalink").html(),l=new RegExp(WPGlobusPlusSlug.homeURL,"g"),n=a.replace(l,WPGlobusPlusSlug.homeLocalizedURL);e?(null!==WPGlobusPlusSlug.slug&&(n=n.replace(new RegExp(u("#post_name").val()),WPGlobusPlusSlug.slug)),u("#sample-permalink").html(n),null===WPGlobusPlusSlug.slug&&null===WPGlobusPlusSlug.shortenSlug||(u("#editable-post-name-full").text(WPGlobusPlusSlug.slug),u("#editable-post-name").text(WPGlobusPlusSlug.shortenSlug))):(n=n.replace(new RegExp(u("#post_name").val()),u("#editable-post-name-full").text()),u("#sample-permalink").html(n))}},attachListeners:function(){"gutenberg"==WPGlobusPlusSlug.builderID?u(document).on("blur",".wpglobus-editable-post-name",function(e){var a=u(this),l=a.val();l!=a.data("old-name")&&(0<l.length?o.getSamplePermalink(a.data("post-id"),a.data("language"),l):o.remove(a.data("post-id"),a.data("language")))}):(u(document).ajaxSend(function(e,a,l){var n;void 0!==l.data&&(void 0!==o.currentExtraLanguage||void 0!==(n=u('input[name="wpglobus_language"]').val())&&n!=WPGlobusCoreData.default_language)&&-1!=l.data.indexOf("action=sample-permalink")&&(o.currentExtraLanguage=n)}),u(document).ajaxComplete(function(e,a,l){void 0!==o.currentExtraLanguage&&-1!=l.data.indexOf("action=sample-permalink")&&(o.save(WPGlobusAdmin.$_get.post,o.currentExtraLanguage,u("#editable-post-name-full").text()),o.real_slug.val(o.revert_slug),o.localizePermalink(!1),o.currentExtraLanguage=void 0)}))},getSamplePermalink:function(n,t,e){u.post(ajaxurl,{action:"sample-permalink",post_id:n,new_slug:e,new_title:u("#title").val(),samplepermalinknonce:u("#samplepermalinknonce").val()},function(e){var a=e.match(/<span id="editable-post-name-full">.*<\/span>/);if(void 0!==a[0]){var l=a[0].replace('<span id="editable-post-name-full">',"");l=l.replace("</span>",""),o.save(n,t,l),u("#editable-post-name-"+t).val(l)}})},remove:function(a,l){o.promise=o.promise.then(function(){var e={action:"wpglobus-remove-name"};return e.post_id=a,e.language=l,u.ajax({beforeSend:function(){void 0!==o.beforeSend&&o.beforeSend(e)},type:"POST",url:WPGlobusAdmin.ajaxurl,data:{action:WPGlobusPlusSlug.process_ajax,order:e},dataType:"json"})},function(){}).then(function(e){"success"==e.status&&u("#editable-post-name-"+e.language).data("old-name",e.new_name)})},save:function(a,l,n){o.promise=o.promise.then(function(){var e={action:"wpglobus-save-name"};return e.post_id=a,e.language=l,e.new_name=n,u.ajax({beforeSend:function(){void 0!==o.beforeSend&&o.beforeSend(e)},type:"POST",url:WPGlobusAdmin.ajaxurl,data:{action:WPGlobusPlusSlug.process_ajax,order:e},dataType:"json"})},function(){}).then(function(e){"success"==e.status&&(u("#editable-post-name-"+e.language).data("old-name",e.new_name),u(document).trigger("wpglobus-sample-permalink:done",[e,e.language]))})}};WPGlobusPlusSlug=u.extend({},WPGlobusPlusSlug,o),WPGlobusPlusSlug.init()}(jQuery);