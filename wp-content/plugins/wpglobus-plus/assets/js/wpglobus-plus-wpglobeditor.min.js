!function(i){"use strict";var a={option:{mode:"table"},order:{},filterClass:"",init:function(e){a.option=i.extend(a.option,e),void 0!==WPGlobusPlusEditor.mode&&"ueditor"==WPGlobusPlusEditor.mode&&(a.option.mode=WPGlobusPlusEditor.mode),"table"==a.option.mode?(a.filterClass=i('input[name="wpglobeditor-page-filter-class"]').val(),this.attachListeners()):"undefined"!=typeof WPGlobusDialogApp&&setTimeout(function(){i.each(WPGlobusPlusEditor.elements,function(e,o){WPGlobusDialogApp.addElement(o)})},3e3)},attachListeners:function(){i(document).on("click",".wpglobus-plus-wpglobeditor-filter",function(e){var o=i(this).data("filter");""!=o&&(i("."+o).hasClass("filtered")?i(".wpglobeditor-item").removeClass("hidden filtered"):(i(".wpglobeditor-item").addClass("hidden"),i("."+o).removeClass("hidden").addClass("filtered")))}),i(document).on("click","#wpglobus-plus-add-item",function(e){var o=i("#wpglobus-plus-skeleton tbody tr").clone();o.removeClass("hidden"),i("#wpglobus-plus-editor-items tbody .no-items").hide(),i("#wpglobus-plus-editor-items tbody").append(o)}),i(document).on("click",".wpglobus-plus-action-ajaxify",function(e){e.preventDefault();var o=i(this);"remove"==o.data("action")&&o.parents("tr").fadeToggle("slow"),a.order={},a.order.action=WPGlobusPlusEditor.module+"-"+o.data("action"),a.order.module=WPGlobusPlusEditor.module,a.order.page=o.data("page"),a.order.key=o.data("key"),a.ajax(a.order).done(function(e){}).fail(function(e){}).always(function(e,o){})}),i(document).on("change",".wpglobus-plus-ajaxify",function(e){var d=i(this),o=d.parents("tr");a.order={},a.order.action=WPGlobusPlusEditor.module+"-"+d.data("action"),a.order.module=WPGlobusPlusEditor.module,a.order.page=o.find("input.page").val(),a.order.element=o.find("input.element").val(),a.order.key=d.data("key"),""!=a.order.page&&""!=a.order.element&&a.ajax(a.order).done(function(e){var o=d.parents("tr.wpglobeditor-item"),t=a.filterClass.replace("{{page}}",e.order.page.replace(".","-")),l=o.hasClass("filtered")?" filtered":"";""==l&&0<i(".filtered").length&&(l=" filtered"),o.removeClass().addClass("wpglobeditor-item "+t+l),o.find(".wpglobus-plus-wpglobeditor-filter").attr("data-filter",t)}).fail(function(e){}).always(function(e,o){})})},ajax:function(e,o){return i.ajax({beforeSend:function(){void 0!==o&&o()},type:"POST",url:ajaxurl,data:{action:WPGlobusPlusEditor.process_ajax,order:e},dataType:"json"})}};WPGlobusPlusEditor=i.extend({},WPGlobusPlusEditor,a),WPGlobusPlusEditor.init()}(jQuery);